1.树状数组：一般操作 单点更新   ，区间查询（前缀和）

2.单点查询.区间修改

单点查询：差分数组d[i]= a[i]-a[i-1]     所以a[i]=a[i]+d[1]….d[i] 通过求d[i]的前缀和实现单点查询    

单点查询——>区间查询

区间更新 ：当区间[l,r]加上x的时候，a[l]与前一个元素a[l-1]的差增加了x，a[r+1]与a[r]的差减少了x   ，所以只需给d[l]加上x，给d[r+1]加x，给d[r+1]减x即可。

区间修改–——>两个单点修改

3.区间修改 区间查询**   更推荐线段树

差分数组d[i]——>前缀和sum[i]

d[1]被用n次，d[2]用n-1次…..   d[i]*(n-i+1)求和=(n+1)*(sum( d[i]  ))- sum(  d[i]*i   )         

。方案：维护两个数组的前缀和

c1[i]=d[i]

c2[i]=d[i]*i

所以sum=(n+1)*sum[c1[i]]-sum(c2)